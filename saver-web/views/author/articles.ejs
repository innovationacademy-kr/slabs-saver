<%- contentFor('navbar') %>
<%- include('../partials/navbar.ejs') %>

<%- contentFor('body') %>
<link rel="stylesheet" href="/stylesheets/author/articles.css" />
<section class="list-table">
    <table class="mytable">
      <thead class="table-header">
        <tr class="table-header__row">
          <th class="table-header__cell">No</th>
          <th class="table-header__cell">헤드라인</th>
          <th class="table-header__cell">작성일시</th>
          <th class="table-header__cell">출고 상황</th>
          <th class="table-header__cell">사진</th>
          <th class="table-header__cell">상태</th>
        </tr>
      </thead>
      <tbody class="table-body">
        <% articles.forEach((article)=> { %>
        <tr class="table-body__row">
          <td class="table-body__cell"><%= article.id %></td>
          <td class="table-body__cell">
            <% if (article.status < 3) { %>
              <a href=<%= `/author/articles/edit/${article.id}` %> > <%= article.headline %> </a>
            <% } else { %>
                <%= article.headline %>
            <% } %>
          </td>
          <td class="table-body__cell"><%= article.updatedAt %></td>
          <td class="table-body__cell"><%= article.status === 4 ? 'O' : 'X' %></td>
          <td class="table-body__cell"><%= article.image ? 'O' : 'X' %></td>
          <td class="table-body__cell">
          <% if (article.status === 1) { %>
            임시저장
          <% } else if (article.status === 2) { %>
            완료
          <% } else if (article.status === 3) { %>
            출고
          <% } else { %>
            게재
          <% } %>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </section>

  
<section class="list-buttons flex-section" style="margin-bottom: 2rem;">

  <% if (underLimitPage != 0) { %>
    <a class = "btn btn-green margin-btn"  href= "/author/articles?page=0"> < </a>
  <% } %>
  <% for(var i = underLimitPage; i < underLimitPage + 5 && i <= totalPage; i++){ %>
    <a class = "btn btn-green margin-btn" href= <%=`/author/articles?page=${i}`%>> <%=i + 1%> </a>
  <% } %>
  <% if (page + 2 < totalPage) { %>
    <a class = "btn btn-green margin-btn" href=<%=`/author/articles?page=${totalPage}`%> > > </a>
  <% } %>

  </section>

  <%- contentFor('footer') %>
  <%- include('../partials/footer.ejs') %>


